## 设计模式实践笔记
> 在实践中找到设计模式的通用法则，使用规律

看到有人说设计模式过时了，我得说设计模式非常非常有用，用Proxy做RAII，用Bridge解耦对象，用Observer 来Watch状态变化，用Strategy解耦实现和接口，用Adapter适配异构，用Command实现Undo/Redo，用Decorator实现无侵入式增强，Interpreter实现表达式，用Vistor分治一个大对象…… （1/2）
这些设计模式可以用任何的编程范式来实现，关键是我们要理解其思想而不是教条，其中心思想两个：1）耦合接口而不是实现，2）分离控制逻辑和业务逻辑。如果能够真正地理解这两点，你会不自觉地写出设计模式的代码，代码的扩展性和重用性也会很好。示例：在Spring 框架加持下，几乎很难写烂代（2/2）
— 左耳朵耗子

感觉自己对设计模式的理解总是差点意思，不像上面这种简洁，甚至没有；不够透彻。
还有个观点是「没有什么复杂的结构是通过加一层解决不了的」，好像这么说很有道理。

### 设计模式是什么？
设计模式是软件设计中常见问题的典型解决方案。 它们就像能根据需求进行调整的预制蓝图， 可用于解决代码中反复出现的设计问题。
模式与算法和工具类之间的区别，算法和工具类有明确的目的和步骤；模式更像一个设计稿，描述大致要怎么做。两者用于处理问题的层次不同。
每一种不同的模式，内聚的是什么，解藕的又是什么？要这么去思考和看设计模式。

### 模式包含那些内容
- 意图：描述问题和解决方案
- 动机：描述问题解决方案的细节
- 结构：描述模式用到的部分，以及之间的关系
- 不同语言的实现；不同编程范式下的实现


### 场景一：XX模式配合工厂模式
- 一对多的场景下，比如策略模式 + 工厂模式。
- 工厂模式的实现也有不同，具体在对象创建上，可以结合 Spring 的 Bean 注入到集合，或者 Bean 初始化完成之后加入到集合。
- 工厂的对象也有可能需要排序等情况。
- 工厂存储对象的形式可能会有 KV 的，用来获取具体的处理对象。也可以是 List，用来便利每种处理情况，这种有点像责任链的变种。


### 过滤器模式/管道
- 实现方式1：使用循环调用每个过滤类的 do()，如果有不满足的就跳过。
- 实现方式2：使用在过滤器类里面加上一个 next 属性，每次调用 next 递归。
- 什么场景下选循环方式？

### 模版方法
- 常规理解：模版方法用来实现规范固定处理流程。特殊处理放到抽象类的子类去实现。
- 如果在主体模版部分不再抽象类里面实现，而是在一个逻辑类里面固定好，特殊的需求的实现使用「工厂+策略模式」选择，是不是也可以实现表面上的模版方法，规范流程。
- 其实，模版方法应该还有另一种功能。在一个大的主流程上，会有各种大分支。主流程有处理模版，主流程与分支衔接处应该也有模版，用来规范输入/输出/异常。就像水管接口一样，需要规范好的接口。


### 记录
- 设计模式要换不同的角度去看，换不同的模型去看
- 其实最总要的是想明白要干什么，没有什么模式不模式，更重要的是能彻底理解正在做的事情的复杂情况
- 在技术世界不要觉得量变会造成质变，这是不可能的。技术这个东西就像搞建筑砌砖头，砌砖头砌的再多也不可能让你能成为一个架构师的，因为你不懂原理，不懂科学方法，你就不可能成长上去的。

### 疑问
- 设计模式到底在解决什么问题？更本质的作用的是什么？
  - **支付业务里面的例子**
  - 在支付主要流程，与渠道之间，就像一个大的管道上，接入很多小的分支渠道，事实也就是这样的。
  - 在主管道上有路由策略，工厂，以及 SPI 来判断和创建出对应的分支渠道，在衔接处可以使用模版方法统一处理衔接的协议，比如输入，输出，以及异常处理。
  - 模版方法，规范流程，衔接上下游。

### todo
- 整理成文章出来
- 把设计模式在过一遍


### 信息
- (Design Patterns)[https://sourcemaking.com/]
- (Design Patterns)[https://refactoringguru.cn/design-patterns/]